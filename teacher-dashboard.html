<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Teacher Dashboard | SJVM</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body { font-family: Arial, sans-serif; margin: 0; background: #f4f8fc; }
    header { background: #003366; color: white; padding: 10px 20px; display:flex; align-items:center; justify-content:space-between; }
    .profile { display:flex; align-items:center; }
    .profile-circle { width:40px; height:40px; border-radius:50%; object-fit:cover; margin-right:10px; }
    nav { background: #0059b3; display:flex; justify-content:center; flex-wrap:wrap; }
    nav a { color:white; padding:12px 15px; text-decoration:none; font-weight:bold; }
    nav a:hover { background:#003366; }
    .container { max-width:1000px; margin:20px auto; background:white; padding:20px; border-radius:10px; box-shadow:0 0 10px rgba(0,0,0,0.1); }
    table { width:100%; border-collapse:collapse; margin-top:20px; font-size:14px; }
    th,td { padding:8px; border:1px solid #ccc; text-align:center; }
    th { background:#e0ebff; }
    select, input, textarea, button { margin-top:8px; padding:6px; width:100%; box-sizing:border-box; }
    .status-pass { background:#ccffcc; }
    .status-fail { background:#ffcccc; }
    @media (max-width:600px){ table,th,td { font-size:12px; } }
  </style>
</head>
<body>

<header>
  <div class="profile">
    <img id="teacherPhoto" class="profile-circle" alt="Teacher Photo" src="https://raw.githubusercontent.com/Echoesofthe21stcentury/sjvm-schools/main/SJVM%20logo%20empowering%20mankind%20without%20background.png">
    <span id="usernameDisplay">Teacher</span>
  </div>
</header>

<nav>
  <a href="#" onclick="loadAttendance()">ðŸ“… Attendance</a>
  <a href="#" onclick="loadHomework()">ðŸ“š Homework</a>
  <a href="#" onclick="loadResult()">ðŸ§¾ Upload/Edit Result</a>
</nav>

<div class="container" id="dashboardContent">
  <h3>Select a menu above to begin.</h3>
</div>

<script>
const studentsPerClass = {
  "Class 1": { "S101": "Arjun", "S102": "Megha" },
  "Class 2": { "S201": "Ravi", "S202": "Sneha" },
  "Class 3": { "S301": "Raj", "S302": "Diya" }
};

const subjects = ["Kannada", "English", "Hindi", "Mathematics", "Science", "Social Science"];
const exams = ["FA-1", "FA-2", "FA-3", "FA-4", "SA-1", "SA-2"];

function loadAttendance() {
  const classOptions = Object.keys(studentsPerClass).map(c => `<option>${c}</option>`).join("");
  document.getElementById("dashboardContent").innerHTML = `
    <h2>ðŸ“… Mark Attendance</h2>
    <label>Select Date:</label><input type="date" id="attDate">
    <label>Select Class:</label><select id="attClass"><option>--Select--</option>${classOptions}</select>
    <button onclick="showAttendance()">Load Students</button>
    <div id="attTable"></div>
  `;
}

function showAttendance() {
  const cls = document.getElementById("attClass").value;
  const date = document.getElementById("attDate").value;
  if (!cls || !date) return alert("Please select class and date.");

  const students = studentsPerClass[cls];
  const rows = Object.entries(students).map(([id, name]) => `
    <tr>
      <td>${name} (${id})</td>
      <td><select id="att_${id}">
        <option style="background:lightgreen" value="Present">Present</option>
        <option style="background:salmon" value="Absent">Absent</option>
      </select></td>
    </tr>`).join("");

  document.getElementById("attTable").innerHTML = `
    <table><tr><th>Student</th><th>Status</th></tr>${rows}</table>
    <button onclick="alert('Attendance saved! âœ…')">Submit Attendance</button>
  `;
}

function loadHomework() {
  const classOptions = Object.keys(studentsPerClass).map(c => `<option>${c}</option>`).join("");
  document.getElementById("dashboardContent").innerHTML = `
    <h2>ðŸ“š Upload Homework</h2>
    <label>Select Class:</label><select id="hwClass"><option>--Select--</option>${classOptions}</select>
    <label>Subject:</label><input id="hwSubject">
    <label>Homework Description:</label><textarea id="hwDesc" rows="4"></textarea>
    <button onclick="alert('Homework uploaded! âœ…')">Submit Homework</button>
  `;
}

function loadResult() {
  const classOptions = Object.keys(studentsPerClass).map(c => `<option>${c}</option>`).join("");
  const examOptions = exams.map(e => `<option>${e}</option>`).join("");

  document.getElementById("dashboardContent").innerHTML = `
    <h2>ðŸ§¾ Upload or Edit Result</h2>
    <label>Select Class:</label><select id="resClass"><option>--Select--</option>${classOptions}</select>
    <label>Select Student:</label><select id="resStudent"><option>--Select Class First--</option></select>
    <label>Select Exam:</label><select id="resExam"><option>--Select--</option>${examOptions}</select>
    <div id="marksArea"></div>
  `;

  document.getElementById("resClass").addEventListener("change", () => {
    const cls = document.getElementById("resClass").value;
    const students = studentsPerClass[cls] || {};
    const studentOptions = Object.entries(students).map(([id, name]) => `<option value="${id}">${name} (${id})</option>`).join("");
    document.getElementById("resStudent").innerHTML = `<option>--Select--</option>${studentOptions}`;
  });

  document.getElementById("resStudent").addEventListener("change", showMarksForm);
}

function showMarksForm() {
  const rows = subjects.map(sub => `
    <tr>
      <td>${sub}</td>
      <td><input type="number" id="ob_${sub}" /></td>
      <td><input type="number" id="max_${sub}" /></td>
      <td><input type="number" id="int_${sub}" /></td>
      <td><input type="number" id="intmax_${sub}" /></td>
      <td><input type="number" id="total_${sub}" readonly /></td>
      <td><input type="text" id="grade_${sub}" /></td>
      <td><select id="status_${sub}">
        <option value="Pass">Pass</option>
        <option value="Fail">Fail</option>
      </select></td>
    </tr>`).join("");

  document.getElementById("marksArea").innerHTML = `
    <table>
      <tr><th>Subject</th><th>Obtained</th><th>Max</th><th>Internal</th><th>Internal Max</th><th>Total</th><th>Grade</th><th>Status</th></tr>
      ${rows}
    </table><br>
    <label>Total Marks:</label><input id="totalMarks">
    <label>Total Max Marks:</label><input id="maxMarks">
    <label>Percentage:</label><input id="percentage">
    <label>Final Grade:</label><input id="finalGrade">
    <label>Final Result:</label><select id="finalStatus">
      <option>Pass</option><option>Fail</option>
    </select><br><br>
    <button onclick="alert('Result submitted! âœ…')">Submit Result</button>
  `;

  subjects.forEach(sub => {
    document.getElementById(`ob_${sub}`).addEventListener("input", () => calcTotal(sub));
    document.getElementById(`int_${sub}`).addEventListener("input", () => calcTotal(sub));
  });
}

function calcTotal(sub) {
  const ob = +document.getElementById(`ob_${sub}`).value || 0;
  const intl = +document.getElementById(`int_${sub}`).value || 0;
  document.getElementById(`total_${sub}`).value = ob + intl;
}
</script>

</body>
</html>
