<!DOCTYPE html>
<html>
<head>
  <title>Assign Student | SJVM</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <style>
    body { font-family: Arial; background: #f4f4f4; padding: 20px; }
    .form-box { background: white; padding: 20px; border-radius: 10px; max-width: 600px; margin: auto; }
    label { display: block; margin-top: 10px; }
    input, select, textarea { width: 100%; padding: 8px; margin-top: 5px; }
    button { margin-top: 15px; padding: 10px 20px; background: #003366; color: white; border: none; border-radius: 5px; cursor: pointer; }
    button:hover { background: #0059b3; }
  </style>
</head>
<body>

<div class="form-box">
  <h2>üìö Assign New Student</h2>
  <label>Name</label>
  <input id="name" required>

  <label>Student ID (Ex: SBK-103)</label>
  <input id="sid" required>

  <label>Password</label>
  <input id="password" required value="student123">

  <label>Class</label>
  <select id="class">
    <option>Class 1</option>
    <option>Class 2</option>
    <option>Class 3</option>
    <option>Class 4</option>
    <option>Class 5</option>
    <option>Class 6</option>
    <option>Class 7</option>
    <option>Class 8</option>
    <option>Class 9</option>
    <option>Class 10</option>
  </select>

  <label>Branch</label>
  <select id="branch">
    <option>Bandikodigenahalli</option>
    <option>Atturu Layout</option>
  </select>

  <label>Gender</label>
  <select id="gender"><option>Male</option><option>Female</option></select>

  <label>Date of Birth</label>
  <input type="date" id="dob">

  <label>Father's Name</label>
  <input id="father">

  <label>Mother's Name</label>
  <input id="mother">

  <label>Address</label>
  <textarea id="address"></textarea>

  <label>Mobile</label>
  <input id="mobile">

  <label>Email</label>
  <input id="email">

  <label>Photo URL</label>
  <input id="photo" value="https://raw.githubusercontent.com/Echoesofthe21stcentury/sjvm-schools/main/SJVM%20logo%20empowering%20mankind%20without%20background.png">

  <button onclick="submitStudent()">‚úÖ Assign Student</button>
</div>

<script>
const usersURL = "https://api.github.com/repos/Echoesofthe21stcentury/sjvm-schools/contents/users.json";

async function submitStudent() {
  const id = document.getElementById("sid").value.trim();
  const cls = document.getElementById("class").value;
  const student = {
    name: document.getElementById("name").value.trim(),
    password: document.getElementById("password").value,
    class: cls,
    branch: document.getElementById("branch").value,
    gender: document.getElementById("gender").value,
    dob: document.getElementById("dob").value,
    father: document.getElementById("father").value,
    mother: document.getElementById("mother").value,
    address: document.getElementById("address").value,
    mobile: document.getElementById("mobile").value,
    email: document.getElementById("email").value,
    photo: document.getElementById("photo").value
  };

  const token = prompt("Enter GitHub Token:");
  if (!token) return alert("Token required!");

  const res = await fetch(usersURL, {
    headers: { Authorization: `token ${token}` }
  });
  const data = await res.json();
  const content = JSON.parse(atob(data.content));
  const sha = data.sha;

  // Insert student
  content.Student = content.Student || {};
  content.Student[cls] = content.Student[cls] || {};
  if (content.Student[cls][id]) return alert("‚ùå Student ID already exists.");
  content.Student[cls][id] = student;

  // Update GitHub
  await fetch(usersURL, {
    method: "PUT",
    headers: { Authorization: `token ${token}` },
    body: JSON.stringify({
      message: `üÜï New student ${id} added
