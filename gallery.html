<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SJVM School Gallery</title>

  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap" rel="stylesheet" />

  <style>
    * { margin:0; padding:0; box-sizing:border-box; font-family:'Poppins',sans-serif; }
    body { background: linear-gradient(to right,#0f2027,#203a43,#2c5364); color:white; }

    header { background-color:#1b2d3b; display:flex; justify-content:space-between; align-items:center; padding:1rem 2rem; flex-wrap:wrap; }
    .logo { display:flex; align-items:center; font-size:1.6rem; font-weight:bold; }
    .logo img { height:40px; margin-right:10px; }
    .hamburger { display:none; font-size:24px; background:none; color:white; border:none; cursor:pointer; }
    .nav-links { list-style:none; display:flex; gap:1.5rem; }
    .nav-links li a { color:#eee; text-decoration:none; font-weight:500; }
    .nav-links li a:hover, .nav-links li a.active { color:#ffd700; font-weight:bold; }
    .login-btn { background-color:#ffd700; color:black; padding:0.5rem 1rem; border:none; border-radius:5px; font-weight:bold; cursor:pointer; }

    section { padding:2rem; text-align:center; }

    h1,h2 { color:#ffd700; margin-bottom:1rem; }

    .gallery-container { display:flex; flex-wrap:wrap; justify-content:center; gap:1rem; margin-top:1rem; }
    .gallery-item { width:200px; cursor:pointer; text-align:center; background:rgba(255,255,255,0.05); border-radius:10px; padding:0.5rem; transition: transform 0.3s; }
    .gallery-item img { width:100%; height:150px; object-fit:cover; border-radius:10px; }
    .gallery-item:hover { transform:scale(1.05); }
    .gallery-item p { margin-top:0.5rem; font-weight:bold; color:#ffd700; }

    /* Modal */
    #eventModal { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.95); justify-content:center; align-items:flex-start; z-index:1000; flex-direction:column; overflow-y:auto; padding:2rem; }
    #eventModal h2 { color:#ffd700; text-align:center; margin:1rem 0; }
    #eventModal p { text-align:center; margin-bottom:1rem; }
    #eventImages { display:flex; flex-wrap:wrap; justify-content:center; gap:1rem; margin-bottom:1rem; }
    #eventImages img { width:200px; border-radius:10px; cursor:pointer; }
    #eventModal button { padding:0.5rem 1rem; margin:0.5rem; cursor:pointer; border:none; border-radius:5px; font-weight:bold; }

    footer { text-align:center; padding:1rem; background-color:#111; color:#bbb; }

    @media(max-width:768px){ 
      .gallery-item { width:45%; } 
      #eventImages img { width:45%; } 
      .nav-links { display:none; flex-direction:column; width:100%; background-color:#1b2d3b; padding:1rem 0; }
      .nav-links.show { display:flex; }
      .hamburger { display:block; }
    }
  </style>
</head>

<body>
  <!-- Header -->
  <header>
    <div class="logo">
      <img src="SJVM logo empowering mankind without background.png" alt="SJVM Logo" />
      SJVM
    </div>
    <button class="hamburger">☰</button>
    <ul class="nav-links" id="navLinks">
      <li><a href="index.html">Home</a></li>
      <li><a href="forms.html">Admissions</a></li>
      <li><a href="shop.html">Shop</a></li>
      <li><a href="gallery.html" class="active">Gallery</a></li>
      <li><a href="branches.html">Branches</a></li>
      <li><a href="contact.html">Contact</a></li>
      <li><a href="login.html" class="login-btn">Login</a></li>
    </ul>
  </header>

  <!-- Gallery Section -->
  <section>
    <h1>Bandikodigenahalli Events</h1>
    <div class="gallery-container" id="bandiGallery"></div>

    <h1>Atturu Events</h1>
    <div class="gallery-container" id="atturuGallery"></div>
  </section>

  <!-- Event Modal -->
  <div id="eventModal">
    <button onclick="closeModal()" style="align-self:flex-end; background:#ffd700; color:#000;">✖ Close</button>
    <h2 id="eventTitle"></h2>
    <p id="eventDesc"></p>
    <div id="eventImages"></div>
    <div style="text-align:center;">
      <button id="downloadImagesBtn" style="background:#ffd700; color:#000;">Download Images</button>
      <button id="downloadPDFBtn" style="background:#ffd700; color:#000;">Download PDF</button>
    </div>
  </div>

  <footer>
    <p>© 2025 SJVM School. All rights reserved.</p>
  </footer>

  <script>
    const hamburger = document.querySelector(".hamburger");
    const navLinks = document.getElementById("navLinks");
    hamburger.addEventListener("click", ()=> navLinks.classList.toggle("show"));

    const bandiGallery = document.getElementById("bandiGallery");
    const atturuGallery = document.getElementById("atturuGallery");
    const eventModal = document.getElementById("eventModal");
    const eventTitle = document.getElementById("eventTitle");
    const eventDesc = document.getElementById("eventDesc");
    const eventImages = document.getElementById("eventImages");
    const downloadImagesBtn = document.getElementById("downloadImagesBtn");
    const downloadPDFBtn = document.getElementById("downloadPDFBtn");

    fetch('events.json')
      .then(res => res.json())
      .then(events => {
        events.forEach(ev => {
          const div = document.createElement('div');
          div.classList.add('gallery-item');
          div.innerHTML = `<img src="${ev.images[0]}" alt="${ev.title}"><p>${ev.title}</p>`;
          div.addEventListener('click', ()=> openModal(ev));
          if(ev.school==="Bandikodigenahalli") bandiGallery.appendChild(div);
          else if(ev.school==="Atturu") atturuGallery.appendChild(div);
        });
      });

    function openModal(ev){
      eventModal.style.display="flex";
      eventTitle.textContent=ev.title;
      eventDesc.textContent=ev.description;
      eventImages.innerHTML="";
      ev.images.forEach(img=>{
        const i=document.createElement('img');
        i.src=img; i.alt=ev.title;
        i.addEventListener('click', ()=> downloadFile(img));
        eventImages.appendChild(i);
      });
      downloadImagesBtn.onclick = ()=> ev.images.forEach(img=>downloadFile(img));
      downloadPDFBtn.onclick = ()=> { if(ev.pdf) downloadFile(ev.pdf) };
    }
    function closeModal(){ eventModal.style.display="none"; }
    function downloadFile(src){ const a=document.createElement('a'); a.href=src; a.download=src.split("/").pop(); a.click(); }
  </script>
</body>
</html>
