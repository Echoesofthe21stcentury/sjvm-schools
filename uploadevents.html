<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SJVM Event Gallery</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap" rel="stylesheet">
<style>
  *{margin:0;padding:0;box-sizing:border-box;font-family:'Poppins',sans-serif;}
  body{background:linear-gradient(to right,#0f2027,#203a43,#2c5364);color:white;min-height:100vh;}
  header{padding:1rem;text-align:center;background:#203a43;box-shadow:0 2px 5px rgba(0,0,0,0.3);}
  header h1{color:#ffd700;font-size:1.8rem;}
  main{padding:1rem;}
  select{padding:0.5rem;border-radius:5px;border:none;margin-bottom:1rem;width:100%;max-width:400px;}
  .gallery-container{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:10px;}
  .event-section{margin-bottom:2rem;}
  .event-title{font-size:1.2rem;font-weight:bold;margin-bottom:0.5rem;color:#ffd700;text-align:center;}
  .gallery-container img{width:100%;height:150px;object-fit:cover;border-radius:8px;border:2px solid #ffd700;transition:transform 0.2s;}
  .gallery-container img:hover{transform:scale(1.05);}
  @media (max-width:600px){
    .gallery-container img{height:120px;}
    header h1{font-size:1.5rem;}
  }
</style>
</head>
<body>
<header>
  <h1>SJVM Event Gallery</h1>
</header>
<main>
  <label>Select School Branch:</label>
  <select id="branchSelect"></select>
  
  <div id="eventsContainer"></div>
</main>

<script>
// ---------- Load events.json ----------
let eventsData = [];
async function loadEvents(){
  try{
    const res = await fetch('events.json'); // Make sure events.json is in same folder
    eventsData = await res.json();
    loadBranches();
  }catch(e){
    alert("Failed to load events.json. Use Live Server or XAMPP.");
    console.error(e);
  }
}

// ---------- Load Branches ----------
function loadBranches(){
  const branchSet = new Set(eventsData.map(e=>e.school));
  const branchSelect = document.getElementById("branchSelect");
  branchSelect.innerHTML="";
  branchSet.forEach(b=>{
    const opt = document.createElement("option"); opt.value=b; opt.textContent=b;
    branchSelect.appendChild(opt);
  });
  branchSelect.addEventListener("change", displayEvents);
  displayEvents();
}

// ---------- Display Events & Images ----------
function displayEvents(){
  const selectedBranch = document.getElementById("branchSelect").value;
  const container = document.getElementById("eventsContainer");
  container.innerHTML="";

  eventsData.filter(e=>e.school===selectedBranch).forEach(ev=>{
    const section = document.createElement("div");
    section.className="event-section";

    const title = document.createElement("div");
    title.className="event-title";
    title.textContent = ev.title;
    section.appendChild(title);

    const gallery = document.createElement("div");
    gallery.className="gallery-container";
    ev.images.forEach(imgPath=>{
      const img = document.createElement("img");
      img.src = imgPath;
      gallery.appendChild(img);
    });
    section.appendChild(gallery);

    container.appendChild(section);
  });
}

// ---------- Initialize ----------
loadEvents();
</script>
</body>
</html>
